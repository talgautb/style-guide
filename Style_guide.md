# HTML/CSS/Stylus

## Руководство по оформлению HTML/CSS/Stylus (Style guide)

### Введение

Данное руководство описывает правила для оформления и форматирования HTML и CSS/Stylus кода.

Основная цель — повысить качество и читаемость кода, облегчить совместную работу и поддержку инфраструктуры.

Это относится к рабочим версиям файлов использующих HTML, CSS, а также css препроцессора Stylus.

Разрешается использовать любые инструменты для минификации компиляции или обфускации кода, при условии наличия оригинальных файлов.

За основу документации использовано руководство и рекомендации google.

Руководство имеет рекомендательный характер.

### Общие правила оформления

#### Протокол

Опускайте название протокола (http:, https:) в ссылках на картинки или другие медиа-ресурсы, файлы стилей или скрипты, конечно, если эти файлы доступны по обоим протоколам.

Отсутствие протокола делает ссылку относительной, что предотвращает смешивание ресурсов из разных протоколов и незначительно уменьшает размер файлов. 

Пример использования
	<script src="//www.google.com/js/gweb/analytics/autotrack.js"></script>

#### Отступы

Главное правила отступов использовать что-то одно (либо пробелы, либо табуляцию).
> Никогда не смешивайте табуляцию с пробелами!

Рекомендуется использование табуляция (2 пробела).

#### Регистр

Всегда используйте только нижний регистр! Для использования вверхнего регистра, например меню сайта, используйте свойсво text-transform: upppercase в css.
Исключением в верстке являются: текст/CDATA.

#### Пробелы в конце строки

Убирайте пробелы в конце строки.
Пробелы в конце строк не обязательны и усложняют использование diff. 

### Общие мета правила

#### Кодировка

Используйте UTF-8 (без BOM).
Указывайте кодировку в HTML шаблонах и документах с помощью <meta charset="utf-8">. Опускайте кодировку для сss-файлов: для них UTF-8 задана по умолчанию.
>Проверьте и настройте свой редактор правильно!

#### Комментарии

Комментируйте свой код, где это необходимо.
Рекомендуются комментарии при неочевидном использовании (например, div {display:inline;}), а также "костылях".
Язык - русский или английский. Желательно один на всем проекте.

#### Задачи

Отмечайте задачи для списка дел с помощью TODO.
Заключайте контакты (имя пользователя или список адресатов) в круглые скобки: TODO(контакт).
Описывайте задачу после двоеточия, например: TODO: Задача.
Например,
	<!-- TODO(Ivan Ivanov): Разобраться с центровкой -->

### Правила оформления HTML

#### Тип документа

Использовать HTML5.
При использовании другого типа оставить комментарий.

#### Валидность HTML

По возможности используйте валидный HTML.

#### Семантика

Используйте HTML так, как это было задумано.
> Соблюдайте правильную вложенность блоков.

#### Использование ALT

Всегда указывайте альтернативное содержимое для мультимедиа.

#### Ссылки-мнемоники

Не используйте ссылки-мнемоники.

Нет смысла использовать ссылки-мнемоники, такие как &mdash;, &rdquo;, или &#x263a;, когда все команды в файлах, редакторах используют одну кодировку (UTF-8)

Единственное исключение из этого правила — служебные символы HTML (например < и &) а так же вспомогательные и “невидимые” символы (например неразрывный пробел).

#### Необязательные теги

Не используйте необязательные теги.

#### Атрибут 'type'

Не указывайте атрибут type при подключении стилей и скриптов в документ. см. п. Тип документа

Рекомендуется:

	<script src="//www.google.com/js/gweb/analytics/autotrack.js"></script>

#### Именование разметки

См. метод именование разметки классами в п. Именование классов.

### Правила форматирования HTML

#### Форматирование

Выделяйте новую строку для каждого блочного, табличного или списочного элемента и ставьте отступы для каждого дочернего элемента.

#### Комментирование

Для блоков используйте комментирование. Пример:
	
	<div class="block">
		...
	</div><!-- .block -->

Формат комментария следующий:

1. комментарий следует после закрытия тега;
2. используется название класса с точкой (.), для индентификатора решетка (#);
3. не рекомендуется использование вспомагательных слов, типа end, start и т.д.
4. комментирование блоков как сущности обязательно.
5. комментирование элементов блока рекомендуется.

> Помните, правильное комментирование облегчает работу с html. 

#### Вложенность

Рекомендуется использовать визуальную вложенность и форматирование html структуры для большей читабельности разметки.

#### Формы

##### Инпуты

Для каждого текстового поля ввода (input) рекомендуется использовать соответствующий тип (type), а не ограничиваться только type="text":

- text 		= поле ввода текста
- tel		= поле ввода номера телефона
- email		= поле ввода e-mail адресов
- password	= поле ввода пароля
- url		= поле ввода веб-адресов

> Если поддержка браузерами других значений HTML5 см.на [htmlbook](http://htmlbook.ru/html/input/type)


##### Проверка ввода данных

Рекомендуется использовать шаблоны для ввода данных в текстовые поля разных типов для защиты от домохозяек.

Пример, использования
	<input name="cvv" pattern="[0-9]{,3}" placeholder="Введите свой CVV">

Для удобства используйте Таблицу №1.

Таблица №1 Регулярные выражения

| Выражение     	| Описание											|
| ------------------|:-------------------------------------------------:|
| \d [0-9			|	Одна цифра от 0 до 9 							|
| \D [^0-9]			|	Любой символ кроме цифры. 						|
| \s				|	Пробел 											|
| [A-Z]				|	Только заглавная латинская буква. 				|
| [A-Za-z]			|	Только латинская буква в любом регистре. 		|
| [А-Яа-яЁё]		|	Только русская буква в любом регистре. 			|
| [A-Za-zА-Яа-яЁё]	|	Любая буква русского и латинского алфавита. 	|
| [0-9]{3}			|	Три цифры. 										|
| [A-Za-z]{6,} 		|	Не менее шести латинских букв. 					|
| [0-9]{,3} 		|	Не более трёх цифр. 							|
| [0-9]{5,10} 		|	От пяти до десяти цифр. 						|
| ^[a-zA-Z]+$ 		|	Любое слово на латинице. 						|
| ^[А-Яа-яЁё\s]+$ 	|	Любое слово на русском включая пробелы. 		|
| ^[ 0-9]+$ 		|	Любое число. 									|
| [0-9]{6} 			|	Почтовый индекс									|
| \d+(,\d{2})? 		| 	Число в формате 1,34 (разделитель запятая). 	|
| \d+(\.\d{2})? 	| 	Число в формате 2.10 (разделитель точка). 		|
| \d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3} 	|	IP-адрес 					|

##### Последовательность фокусировки

Переход между полями с помощью табуляции осуществляется по принципу слева-направо, сверху-вниз. Если поведение фокуса не соответствует данному принципу, то необходимо применить атрибут [tabindex](http://htmlbook.ru/samhtml5/formy/perekhod-mezhdu-polyami-s-pomoshchyu-tabulyat).

### Правила оформления CSS/Stylus

Данные правила распространяются для stylus, т.к. использование "чистого" css в проектах не используется и не рекомендуется. Рекомендовано использования Stylus как общего препроцессора для командных работ.

#### Идентификаторы и классы

Приветствуется использования только классов.
Использование индентификаторов возможно только в особых случаях.

#### Именование классов

Используйте названия для классов максимально абстрактными и со смысловой нагрузкой. Нерекомендуется использования простых слов, а также привязанным к внешним признакам.

Например:
	
	.red-color
		color red /* цвет ошибки - плохо */
	.red-color
		color green /* цвет ошибки - очень плохо */
	.error-color
		color red /* цвет ошибки - хорошо */

> Рекомендуется использования однотипной структуры разметки для разных проектов. Для удобства восприятия.

За основу именования классов взят видоизменненый принцип, предложенный в [MCSS](http://operatino.github.io/MCSS/).

Общие правила (АНБ):
1. никогда не опираться на элементы, только на классы: .block, .block__modificator;
2. всем классам внутри блока давать имена начинающиеся с имени этого блока: .block, .block-name_elem, .block_elem__modificator

Используются основные понятия: Блок, Элемент, Модификатор. (данные понятия являются основой [БЭМ](http://ru.bem.info))

>Также необходимо помнить о специальных и зарезервированных классах, именование их происходит по-другому.

##### Блок

Интерфейс сайта состоит из блоков, которые могут находится в разных местах, на разных страницах, блоки могут быть внутри других блоков, могут влиять на своих родителей.

Особенности блоков:

- блок — абсолютно независимая часть интерфейса (принцип, АНБ);
- у блока должно быть имя по классу. Например: .mainmenu;
- блок может быть модифицирован при необходимости (см. Модификаторы ниже).
- блок может быть элементом другого блока. Например:
	
	<div class="header_menu topmenu"></div> /* элемент блока header, блок topmenu */

##### Элемент

Элемент — зависимая часть интерфейса. Сами по себе элементы ничего не значат и используются только в контексте блоков.

Имя элемента формируется из пары название-блока_элемент (одно нижнее подчеркивание). Пример:
	
	.block_elemnet

> Сложные названия блоков или элементов необходимо писать через дефис (.block-name_element-name).

##### Модификатор

Модификатор влияет и изменяет внешний вид блока/элемента.

Модификатор формируется через название блока или элемента и два нижних подчеркивания. Пример:
	
	.block__modificator


##### Cпециальные классы

Специальные классы существуют для обработки блоков или элементов javascript'ом. Используйте классы в формате .js_* (.js_click-btn, .js_hide-me)

##### Зарезервированные классы

Именование зарезервированных классов нежелательно.

В список входят следующие классы:

- классы, используемые в css фреймворках. Например, .span12;
- простые слова. Например, .block, .show, .error;

#### Вложенность

Максимальная вложенность в блоке может должна не превышать трех (.block_element_element-child). Если у вас вложенность больше 3х, вам стоит пересмотреть свою структуру.

#### Eдиницы измерения

Не указывайте единицы измерения для нулевых значений.

Не ставьте “0” в целой части дробных чисел.

#### Кавычки в ссылках

Не используйте кавычки в ссылках

Не используйте кавычки ("", '') с url(). 


#### Шестнадцатеричные названия цветов

Используйте трехсимвольную шестнадцатеричную запись где это возможно. 

### Правила форматирования CSS

См. правила форматирования Stylus, т.к. использование "чистого" css в проектах не рекомендуется.

### Правила форматирования Stylus

#### Иерархия файлов

Используйте за основу следующую структуру:

Основные блоки и/или группа блоков находится в папке blocks, каждая группа блоков/блок расположен в отдельном файле.

В корне файлы с Настройками, Основными стилями (body, html, a b т.д.) и главный файл генерирующий исходный файл css.

Пример:

- blocks
-- _header.styl
-- _footer.styl
-- ...
-- style.styl
- _common.styl
- _settings.styl
- _style.styl
- main.styl

#### Динамические классы

Используйте динамические классы. Нежелательно написание всей цепочки блок_элемент_модификатор.

Последовательность написания следующая:

Блок, Все дочерние элементы, Все дочерние модификаторы.

Пример:

	.block

		&_element
			padding 10px
			background #fff

		&_element2
			margin-top 10px
			font-size 10px

		&__modificator
			color green


#### Формат

Не используйте в stylus:

1. двоеточие
2. фигурные скобки
3. точку с запятой

>За исключением использования в миксинах и функциях.

#### Отступы

Отделяйте блоки друг от друга, оставляйте пустые строки между всеми сущностями.

Пример:

	.block

		&_element

			padding 10px

	// another block-name
	
	.block-name

		&__modificator

			padding 25px 0